(window.webpackJsonp=window.webpackJsonp||[]).push([[26,194,201,203,204],{1035:function(e,t,n){"use strict";var r=n(8),c=n(5),l=n(10),o=n(128),d=n(519),f=n(516),h=n(16),v=c.RangeError,_=c.String,m=Math.floor,y=l(f),P=l("".slice),C=l(1..toFixed),w=function(e,t,n){return 0===t?n:t%2==1?w(e,t-1,n*e):w(e*e,t/2,n)},S=function(data,e,t){for(var n=-1,r=t;++n<6;)r+=e*data[n],data[n]=r%1e7,r=m(r/1e7)},M=function(data,e){for(var t=6,n=0;--t>=0;)n+=data[t],data[t]=m(n/e),n=n%e*1e7},x=function(data){for(var e=6,s="";--e>=0;)if(""!==s||0===e||0!==data[e]){var t=_(data[e]);s=""===s?t:s+y("0",7-t.length)+t}return s};r({target:"Number",proto:!0,forced:h((function(){return"0.000"!==C(8e-5,3)||"1"!==C(.9,0)||"1.25"!==C(1.255,2)||"1000000000000000128"!==C(0xde0b6b3a7640080,0)}))||!h((function(){C({})}))},{toFixed:function(e){var t,n,r,c,l=d(this),f=o(e),data=[0,0,0,0,0,0],h="",m="0";if(f<0||f>20)throw v("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return _(l);if(l<0&&(h="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*w(2,69,1))-69)<0?l*w(2,-t,1):l/w(2,t,1),n*=4503599627370496,(t=52-t)>0){for(S(data,0,n),r=f;r>=7;)S(data,1e7,0),r-=7;for(S(data,w(10,r,1),0),r=t-1;r>=23;)M(data,1<<23),r-=23;M(data,1<<r),S(data,1,1),M(data,2),m=x(data)}else S(data,0,n),S(data,1<<-t,0),m=x(data)+y("0",f);return m=f>0?h+((c=m.length)<=f?"0."+y("0",f-c)+m:P(m,0,c-f)+"."+P(m,c-f)):h+m}})},1119:function(e,t,n){},1120:function(e,t,n){},1153:function(e,t,n){"use strict";var r=n(8),c=n(127).findIndex,l=n(187),o="findIndex",d=!0;o in[]&&Array(1).findIndex((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),l(o)},1209:function(e,t,n){e.exports=n.p+"4541ae6bcd4eea6c7ff8ae41906fba34.svg"},1210:function(e,t,n){e.exports=n.p+"6861614929a93761f9719bc4400a8fca.svg"},1268:function(e,t,n){var r=n(126),c=n(92);e.exports=function(e){return"number"==typeof e||c(e)&&"[object Number]"==r(e)}},1372:function(e,t,n){},1373:function(e,t,n){e.exports=n.p+"1049966b2461ce73f741000beb5dc5aa.svg"},1374:function(e,t,n){"use strict";n(1119)},1375:function(e,t,n){"use strict";n(1120)},1376:function(e,t,n){},1378:function(e,t,n){},1379:function(e,t,n){},1593:function(e,t,n){"use strict";n.r(t);n(1153),n(239);var r=n(1373),c=n.n(r),l={name:"PlanTier",props:{currentPlan:{type:Object,required:!0},plans:{type:Array,required:!0}},data:function(){return{selectedPlan:{},CheckMark:c.a}},mounted:function(){this.$nextTick((function(){!this.isMobile()&&this.needCarousel()&&this.mountCarousel()}))},created:function(){window.addEventListener("resize",this.onResize)},destroyed:function(){window.removeEventListener("resize",this.onResize)},methods:{mountCarousel:function(){var e=this,t=this.plans.findIndex((function(p){return p.id===e.currentPlan.id}));this.prevIndex=t;var r={cellSelector:".plan",cellAlign:"center",wrapAround:!1,initialIndex:t,contain:!0,pageDots:!1,groupCells:!1,arrowShape:"M66.51 0.58C67.35 -0.21 68.66 -0.19 69.45 0.62C70.22 1.44 70.22 2.71 69.45 3.52C66.36 6.61 50.87 22.1 23.01 49.96C50.87 77.84 66.36 93.33 69.45 96.42C70.29 97.22 70.31 98.55 69.49 99.36C68.7 100.2 67.37 100.22 66.56 99.4C66.54 99.38 66.51 99.36 66.51 99.36C61.72 94.57 23.38 56.23 18.59 51.44C17.78 50.63 17.78 49.31 18.59 48.5C28.18 38.92 61.72 5.37 66.51 0.58Z"},c=n(892);this.flickity=new c(this.$refs.plans,r),this.flickity.on("change",(function(t){var n=t,r=e.plans.length-2;1===t&&e.prevIndex<1?n=t+1:1===t&&e.prevIndex>1?n=t-1:t===r&&e.prevIndex<r?n=r+1:t===r&&e.prevIndex>r&&(n=r-1),t!==n&&e.flickity.select(n),e.prevIndex=n}))},destroyCarousel:function(){this.flickity.destroy(),this.flickity=void 0},isMobile:function(){return window.innerWidth<680},needCarousel:function(){return this.plans.length>3},onResize:function(){this.isMobile()&&void 0!==this.flickity?this.destroyCarousel():this.needCarousel()&&!this.isMobile()&&void 0===this.flickity&&this.mountCarousel()},selectPlan:function(e){var t=this.currentPlan,n=e.deal.has_ended;t.id===e.id||n&&e.tier>t.tier||(this.selectedPlan=e,this.$emit("select",e.id))},priceDisplay:function(e){var t=Number(e.price),n=Number(this.currentPlan.price);return e.id===this.currentPlan.id?"-":"$".concat(t>n?t-n:n-t)},planSelectDisplay:function(e){return e.id===this.currentPlan.id?"Current Plan":this.isPlanAvailable(e)?e.id===this.selectedPlan.id?"Plan Selected":"Select Plan":"Unavailable"},purchaseDisplay:function(e){return e.id===this.currentPlan.id?" ":Number(this.currentPlan.price)<Number(e.price)?"One time purchase of":"One time refund of"},isPlanAvailable:function(e){var t=this.currentPlan,n=e.deal.has_ended;return!(e.tier>t.tier&&(n||!t.can_enhance_license))&&!(t.lowest_available_plan_tier&&e.tier<t.lowest_available_plan_tier)}}},o=(n(1374),n(1375),n(182)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"match-heights",rawName:"v-match-heights",value:{el:[".plan"],disabled:[639]},expression:"{\n    el: ['.plan'],\n    disabled: [\n      639,\n    ],\n  }"}],ref:"plans",staticClass:"change-plan-modal-plans",class:{"plans-carousel":e.plans.length>3,"two-plan-grid":2===e.plans.length}},e._l(e.plans,(function(t){return n("div",{key:t.id,staticClass:"plan",class:{current:t.id===e.currentPlan.id,selected:e.selectedPlan&&t.id===e.selectedPlan.id,"plan-unavailable":!e.isPlanAvailable(t)},on:{click:function(n){return e.selectPlan(t)}}},[n("div",{staticClass:"header"},[n("h4",{staticClass:"plan-title"},[n("span",[e._v("Tier "+e._s(t.tier)+" ")]),e._v(" "),t.id===e.currentPlan.id?n("em",{staticClass:"mobile-only-text"},[e._v("(Current Plan)")]):e._e(),e._v(" "),e.isPlanAvailable(t)?e._e():n("em",{staticClass:"mobile-only-text"},[e._v("(Unavailable)")])]),e._v(" "),n("p",{staticClass:"purchase-text"},[e._v("\n        "+e._s(e.purchaseDisplay(t))+"\n      ")]),e._v(" "),n("div",{staticClass:"price"},[n("em",{staticClass:"mobile-only-text purchase-mobile-text"},[e._v(e._s(e.purchaseDisplay(t)))]),e._v(" "),n("span",[e._v(e._s(e.priceDisplay(t)))])])]),e._v(" "),n("ul",{staticClass:"feature-list",class:{"selected-features":e.selectedPlan&&t.id===e.selectedPlan.id}},e._l(t.plan_features,(function(t){return n("li",{key:t.id,staticClass:"feature"},[n("span",[n("img",{attrs:{src:e.CheckMark}})]),e._v(" "),n("span",{domProps:{innerHTML:e._s(t.feature)}})])})),0),e._v(" "),n("div",{directives:[{name:"popover",rawName:"v-popover",value:{name:"popover-"+t.id,position:"top"},expression:"{ name: `popover-${plan.id}`, position: 'top' }"}],staticClass:"action",class:{current:t.id===e.currentPlan.id,selected:e.selectedPlan&&t.id===e.selectedPlan.id,"plan-unavailable":!e.isPlanAvailable(t)},on:{click:function(n){return e.selectPlan(t)}}},[e.isPlanAvailable(t)?e._e():n("v-popover",{staticClass:"popover",attrs:{name:"popover-"+t.id,event:"hover",width:250}},[e._v("\n        Upgrades unavailable after deal ends\n      ")]),e._v(" "),e._v("\n      "+e._s(e.planSelectDisplay(t))+"\n    ")],1)])})),0)}),[],!1,null,null,null);t.default=component.exports},1660:function(e,t,n){"use strict";(function(e){n(27),n(33),n(31),n(41),n(42);var r=n(20),c=n(4),l=n(1),o=(n(28),n(239),n(14),n(49),n(54),n(81),n(51),n(32),n(183),n(48),n(99),n(76),n(184),n(35)),d=n.n(o),f=n(3),h=n(857),v=n(849),_=n(848),m=n(1839),y=n(964),P=n(1203),C=n(1204),w=n(1840),S=n(1841),M=n(1843);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={components:{Modal:h.default,ModalCloseButton:v.default,Button:_.default,Steps:m.default,SelectPlan:w.default,SelectPaymentMethod:S.default,ReviewPlanChange:M.default,Loading:y.default,Success:C.default,Error:P.default},props:{deal:{type:String,required:!0},uuid:{type:String,required:!0},isRefundDateExpired:{type:Boolean,required:!1},currentPrice:{type:String,required:!1},hasPlus:{type:Boolean,required:!1},hasBriefcase:{type:Boolean,required:!1}},data:function(){return{state:"loading",errorMessage:"",dealPlans:[],currentPlan:{},newPlan:{},isDowngrade:!1,paymentMethod:null,selectedCard:null,paymentTotal:null,currentStep:0,dataForStep:-1,nextStep:"Continue to Payment",stepTitles:["Select Plan","Select Payment Method","Review Selection"]}},computed:{discountType:function(){return this.hasPlus?"Plus":"Briefcase"},memberDiscount:function(){return this.hasPlus||this.hasBriefcase?.1*(Number(this.newPlan.price)-Number(this.currentPlan.price)):0},mobileTitle:function(){return this.stepTitles[this.currentStep]}},watch:{newPlan:function(){this.calculateSteps()},paymentMethod:function(){this.calculateSteps()},selectedCard:function(){this.calculateSteps()}},created:function(){var e=this;Promise.all([this.fetchPlans(),this.fetchCurrentPlan()]).then((function(){e.state="loaded"}))},mounted:function(){var t=this;this.$nextTick((function(){"undefined"!=typeof paypal&&void 0!==paypal.Buttons?t.initPaypalButton():f.default.loadScript("https://www.paypal.com/sdk/js?client-id=".concat(e.env.VUE_APP_PAYPAL_CLIENT_ID,"&debug=false&intent=capture")).then((function(){t.initPaypalButton()}))})),f.default.loadScript("https://js.stripe.com/v3/")},methods:{initPaypalButton:function(){var e=this;return this.$refs.paypalContainer?paypal.Buttons({style:{size:"responsive",layout:"horizontal",color:"gold",shape:"rect",height:49,label:"pay",tagline:!1},createOrder:function(data,t){var n=e.newPlan.price-e.currentPlan.price-e.memberDiscount;return t.order.create({intent:"CAPTURE",application_context:{shipping_preference:"NO_SHIPPING",user_action:"PAY_NOW"},purchase_units:[{description:"\n                ".concat(e.newPlan.deal.public_name," - Upgrade to Tier ").concat(e.newPlan.tier,"\n              "),soft_descriptor:"AppSumo",amount:{value:n}}]})},onApprove:function(data){var t=data.orderID;e.switchPlan({paypalOrderId:t})},onCancel:function(){e.handleClickClose()}}).render(this.$refs.paypalContainer):setTimeout((function(){return e.initPaypalButton()}),100)},handleClickClose:function(){this.$refs.modal.handleClickClose()},calculateSteps:function(){null!==this.newPlan&&this.newPlan.id!==this.currentPlan.id&&(this.dataForStep=0),this.dataForStep>-1&&(this.isDowngrade||null!==this.paymentMethod&&("creditcard"!==this.paymentMethod||"creditcard"===this.paymentMethod&&this.selectedCard))&&(this.dataForStep=2)},fetchCurrentPlan:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat("/","api/userinvoices/?format=json&include[]=deal_plan&include[]=deal&exclude[]=invoice.*")+"&include[]=invoice.payment_type&include[]=invoice.enhanced_invoice_items"+"&include[]=invoice.total&filter{uuid}=".concat(e.uuid),t.abrupt("return",d.a.get(n,{withCredentials:!0}).then((function(t){var data=t.data,n=Object(c.a)(data.invoiceitems,1)[0],r=n.deal,l=n.invoice,o=n.original_invoice_payment_type,d=n.refund_info,f=n.lowest_available_plan_tier,h=n.can_enhance_license,v=n.deal_plan;e.currentPlan=T(T({},v),{},{deal:r,invoice:l,refund_info:d,original_invoice_payment_type:o,lowest_available_plan_tier:f,can_enhance_license:h,uuid:n.uuid,license_key:n.license_key})})));case 2:case"end":return t.stop()}}),t)})))()},fetchPlans:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat("/","api/dealplans/?format=json")+"&filter{is_active}=true&include[]=plan_features"+"&include[]=deal&filter{deal.id}=".concat(e.deal),e.isRefundDateExpired&&(n+="&price=".concat(e.currentPrice)),t.abrupt("return",d.a.get(n,{withCredentials:!0}).then((function(t){var n=t.data.plans;n.forEach((function(e){e.plan_features.forEach((function(t){if(t.code_to_feature_conf){var n=t.code_to_feature_conf.find((function(t){return t.codes===e.tier}));n&&(t.feature=t.feature.replace("{{}}",n.quantity))}})),e.plan_features=e.plan_features.slice(0,6)})),e.dealPlans=n})));case 3:case"end":return t.stop()}}),t)})))()},selectStep:function(e){if(!(e-1>this.dataForStep))switch(1===e&&this.isDowngrade&&(e=2),this.currentStep=e,this.currentStep){case 0:this.nextStep="Continue to Payment";break;case 1:this.nextStep="Continue to Review";break;case 2:this.nextStep="Change Plan"}},onSelectPlan:function(e){this.newPlan=this.dealPlans.find((function(p){return p.id===e})),this.newPlan&&this.currentPlan&&(this.isDowngrade=parseFloat(this.newPlan.price)<=parseFloat(this.currentPlan.price)),this.setPaymentTotal(),this.calculateSteps()},onSelectMethod:function(e){this.paymentMethod=e},onSelectCard:function(e){this.selectedCard=e},onStepChange:function(e){this.selectStep(e)},onCancel:function(){window.vueAPI.closeModal(),2===this.currentStep&&"success"===this.state&&(location.href="/account/")},onContinue:function(){var e=this.currentStep;0===e?this.selectStep(this.isDowngrade?2:1):1===e?this.selectStep(this.currentStep+1):2===e&&this.switchPlan()},switchPlan:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.paypalOrderId,r="".concat("/","license/update/").concat(this.currentPlan.license_key,"/"),data={action:this.isDowngrade?"reduce_tier":"enhance_tier",plan:this.newPlan.id};this.isDowngrade?data.refund_type="default":(data.payment_method=this.paymentMethod,"creditcard"===data.payment_method&&this.selectedCard?(data.payment_method="stripe",data.stripe_token=this.selectedCard.id):"paypal"===this.paymentMethod&&(data.paypal_order_id=n)),this.state="submit";var c=this.$cookies.get("csrftoken");return d()({method:"put",url:r,withCredentials:!0,headers:{"X-CSRFToken":c},data:data}).then((function(){e.state="success"})).catch((function(t){e.state="error",e.errorMessage=t.response.data.message}))},setPaymentTotal:function(){if(this.newPlan.price&&this.currentPlan.price&&!this.isDowngrade){var e=Number(this.newPlan.price)-Number(this.currentPlan.price)-Number(this.memberDiscount);this.paymentTotal=e.toString()}}}}}).call(this,n(83))},1661:function(e,t,n){"use strict";n(1372)},1662:function(e,t,n){"use strict";n(1376)},1663:function(e,t,n){e.exports=n.p+"000830207101fb5602b8afcaf37761ed.svg"},1665:function(e,t,n){"use strict";n(1378)},1666:function(e,t,n){"use strict";n(1379)},1767:function(e,t,n){},1839:function(e,t,n){"use strict";n.r(t);n(239);var r={name:"Steps",props:{mobile:{type:Boolean,default:!1},steps:{type:Array,required:!0},currentStep:{type:Number,default:0,validator:function(e){return e>=0}},isDowngrade:{type:Boolean,default:!1}},created:function(){this.currentStep=Math.min(Math.max(0,this.currentStep),this.steps.length-1)},updated:function(){this.currentStep=Math.min(Math.max(0,this.currentStep),this.steps.length-1)}},c=(n(1661),n(182)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"step-list"},e._l(e.steps,(function(t,r){return n("li",{key:r,staticClass:"step",class:{active:r==e.currentStep,complete:r<e.currentStep},on:{click:function(t){return e.$emit("change",r)}}},[n("span",{staticClass:"step-title",class:{downgrade:e.isDowngrade}},[e._v("\n        "+e._s(t)+"\n      ")])])})),0)])}),[],!1,null,null,null);t.default=component.exports},1840:function(e,t,n){"use strict";n.r(t);var r=n(1593),c=n(909),l=n.n(c),o={name:"SelectPlan",components:{PlanTier:r.default},props:{plans:{type:Array,required:!0},selectedPlan:{type:Object,required:!0},currentPlan:{type:Object,required:!0}},data:function(){return{Question:l.a}},methods:{onSelectPlan:function(e,t){(t&&window.innerWidth<640||!0!==t)&&this.$emit("selectPlan",e,t)}}},d=(n(1662),n(182)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"subtitle"},[e._v("\n    Select which tier you would like to upgrade or downgrade your product to.\n  ")]),e._v(" "),n("p",{staticClass:"included"},[n("span",[e._v("Features included in all plans")]),e._v(" "),n("span",{directives:[{name:"popover",rawName:"v-popover:features.bottom",arg:"features",modifiers:{bottom:!0}}],staticClass:"question-mark"},[n("img",{attrs:{src:e.Question}})])]),e._v(" "),n("v-popover",{staticClass:"popover",attrs:{name:"features",event:"hover",width:300}},[e._v("\n    The following features are included in all plans:\n    "),n("ul",{staticClass:"popover-feature-list"},e._l(e.plans[0].deal.features,(function(t,r){return n("li",{key:r,staticClass:"popover-feature"},[e._v("\n        "+e._s(t.feature)+"\n      ")])})),0)]),e._v(" "),n("p",{staticClass:"choose"},[e._v("\n    Choose New Plan:\n  ")]),e._v(" "),n("PlanTier",{attrs:{"current-plan":e.currentPlan,plans:e.plans},on:{select:e.onSelectPlan}})],1)}),[],!1,null,"481aec12",null);t.default=component.exports},1841:function(e,t,n){"use strict";n.r(t);n(1035);var r=n(1663),c=n.n(r),l=n(1209),o=n.n(l),d=n(1210),f=n.n(d),h={name:"SelectPaymentMethod",components:{CreditCardMethod:n(1842).default},filters:{currency:function(e){var t=parseFloat(e);return"$".concat(t%1>0?t.toFixed(2):t)}},props:{paymentMethod:{type:String,default:""},selectedCard:{type:Object,default:function(){return{}}},paymentTotal:{type:String,default:void 0}},data:function(){return{CreditCardLogo:c.a,PayPalLogo:o.a,TacoLogo:f.a}},created:function(){this.paymentMethod||this.$emit("selectMethod","creditcard")},methods:{selectMethod:function(e){this.$emit("selectMethod",e)},selectCard:function(e){this.$emit("selectCard",e)},userHasCredits:function(){return parseFloat(document.getElementById("user-credit-amount").value)>=parseFloat(this.paymentTotal)}}},v=(n(1665),n(182)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"subtitle"},[e.paymentTotal?n("span",[e._v("\n      Your difference total is "),n("strong",[e._v(e._s(e._f("currency")(e.paymentTotal)))]),e._v(".\n    ")]):e._e(),e._v(" "),n("span",[e._v(" Please select your preferred payment method below")])]),e._v(" "),n("ul",{staticClass:"payment-method-list"},[n("li",{staticClass:"payment-method",class:"creditcard"===e.paymentMethod&&"selected",on:{click:function(t){return e.selectMethod("creditcard")}}},[n("img",{attrs:{src:e.CreditCardLogo}}),e._v(" "),n("span",[e._v("Credit or debit card")])]),e._v(" "),n("li",{staticClass:"credit-card-details"},["creditcard"===e.paymentMethod?n("CreditCardMethod",{attrs:{"selected-card":e.selectedCard},on:{selectCard:e.selectCard}}):e._e()],1),e._v(" "),n("li",{staticClass:"payment-method",class:"paypal"===e.paymentMethod&&"selected",on:{click:function(t){return e.selectMethod("paypal")}}},[n("img",{attrs:{src:e.PayPalLogo}}),e._v(" "),n("span",[e._v("PayPal")])]),e._v(" "),e.userHasCredits()?n("li",{staticClass:"payment-method",class:"credit"===e.paymentMethod&&"selected",on:{click:function(t){return e.selectMethod("credit")}}},[n("img",{staticClass:"taco-fill",attrs:{src:e.TacoLogo}}),e._v(" "),n("span",[e._v("AppSumo Credits")])]):e._e()])])}),[],!1,null,"02c26ef0",null);t.default=component.exports},1843:function(e,t,n){"use strict";n.r(t);n(1035),n(239),n(14),n(32),n(183),n(31);var r=n(1268),c=n.n(r),l=n(1209),o=n.n(l),d=n(1547),f=n.n(d),h=n(1548),v=n.n(h),_=n(1210),m=n.n(_),y={name:"ReviewPlan",filters:{currency:function(e){var t=parseFloat(e);return"$".concat(t%1>0?t.toFixed(2):t)}},props:{isDowngrade:{type:Boolean,required:!0},currentPlan:{type:Object,required:!0},newPlan:{type:Object,required:!0},selectedCard:{type:Object,default:function(){return{}}},paymentMethod:{type:String,default:""},memberDiscount:{type:Number,required:!0},discountType:{type:String,default:""}},data:function(){return{VisaLogo:f.a,MastercardLogo:v.a,PayPalLogo:o.a,TacoLogo:m.a}},computed:{discountForRefund:function(){var e=this;return this.currentPlan.invoice.enhanced_invoice_items.reduce((function(t,n){return n.deal_plan.tier>e.newPlan.tier?t+Number(n.discount):t}),0)},maxRefundableAmount:function(){var e=this.currentPlan.price-this.newPlan.price;return e-this.discountForRefund},refundItems:function(){var e=this,t=this.maxRefundableAmount,n=this.currentPlan.invoice.enhanced_invoice_items,r=this.newPlan.tier,l=[],o=0,d=0;if(n.forEach((function(element){if(element.deal_plan.tier>r){var e=element.cash-element.cash_refunded,n=element.credit-element.credit_refunded,c=l.find((function(e){return e.paymentType===element.payment_type})),f=e&&"Credit"!==element.payment_type?e:n;if(o+f>t&&(f=t-o),o>t)return;element.discount&&(d+=Number(element.discount)),c?c.amount+=f:f&&l.push({amount:f,paymentType:element.payment_type}),o+=f}})),o<t){var f=l.find((function(t){return t.paymentType===e.currentPlan.original_invoice_payment_type})),h=t-o;f?f.amount+=h:h&&l.push({amount:h,paymentType:this.currentPlan.original_invoice_payment_type})}return l.push({amount:d,paymentType:"discount",discountType:this.discountType}),l=l.filter((function(e){return c()(e.amount)&&parseFloat(e.amount)>0}))}}},P=(n(1666),n(182)),component=Object(P.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"subtitle"},[e._v("\n    Your order summary is below.  Please review and click 'Change Plan' to finalize your order.\n  ")]),e._v(" "),n("table",{staticClass:"review-table"},[e._m(0),e._v(" "),n("tr",[n("td",[e._v(e._s(e.currentPlan.deal.public_name)+" - Tier "+e._s(e.currentPlan.tier))]),e._v(" "),n("td",{staticClass:"currency"},[n("em",[e._v(e._s(e._f("currency")(e.currentPlan.price)))])])]),e._v(" "),e._m(1),e._v(" "),n("tr",[n("td",[e._v(e._s(e.newPlan.deal.public_name)+" - Tier "+e._s(e.newPlan.tier))]),e._v(" "),n("td",{staticClass:"currency"},[e._v("\n        "+e._s(e._f("currency")(e.newPlan.price))+"\n      ")])]),e._v(" "),e.discountForRefund?n("tr",[n("th",[e._v("Subtotal")]),e._v(" "),n("th",{staticClass:"currency"},[e._v("\n        -"+e._s(e._f("currency")(e.maxRefundableAmount))+"\n      ")])]):e._e(),e._v(" "),e.discountForRefund?n("tr",[n("td",[e._v(e._s(e.discountType)+" Discount")]),e._v(" "),n("td",{staticClass:"currency"},[e._v("\n        -"+e._s(e._f("currency")(e.discountForRefund))+"\n      ")])]):e._e(),e._v(" "),e.memberDiscount&&!e.isDowngrade?n("tr",[n("td",[e._v(" "+e._s(e.discountType)+" Discount")]),e._v(" "),n("td",{staticClass:"currency"},[e._v("\n        -"+e._s(e._f("currency")(e.memberDiscount))+"\n      ")])]):e._e(),e._v(" "),n("tr",[n("th",[e._v("Total")]),e._v(" "),n("th",{staticClass:"currency"},[e._v("\n        "+e._s(e._f("currency")(e.newPlan.price-e.currentPlan.price-e.memberDiscount))+"\n      ")])])]),e._v(" "),e.isDowngrade?n("div",[n("p",{staticClass:"result-total"},[e._v("\n      Total amount to refund:\n      "),n("strong",[e._v("\n        "+e._s(e._f("currency")(-1*(e.newPlan.price-e.currentPlan.price-e.memberDiscount))))])]),e._v(" "),n("ul",e._l(e.refundItems,(function(t){return n("li",{key:t.payment_type},[t.discountType?e._e():n("span",[n("strong",[e._v("\n            "+e._s(e._f("currency")(t.amount+e.memberDiscount))+"\n          ")]),e._v(" to "+e._s(t.paymentType)+"\n        ")]),e._v(" "),t.discountType?n("span",[n("strong",[e._v(e._s(e._f("currency")(t.amount)))]),e._v("\n          to "+e._s(t.discountType)+" "+e._s(t.paymentType)+"\n        ")]):e._e()])})),0)]):n("div",[n("p",{staticClass:"result-total"},[n("strong",[e._v(e._s(e._f("currency")(e.newPlan.price-e.currentPlan.price-e.memberDiscount)))]),e._v("\n      will be charged to the payment method selected below:\n    ")]),e._v(" "),"creditcard"===e.paymentMethod&&e.selectedCard?n("div",{staticClass:"card-image"},["Visa"===e.selectedCard.brand?n("img",{attrs:{src:e.VisaLogo}}):e._e(),e._v(" "),"Mastercard"===e.selectedCard.brand?n("img",{attrs:{src:e.MastercardLogo}}):e._e(),e._v(" "),n("span",[e._v("Ending in: "),n("strong",[e._v(e._s(e.selectedCard.last4))])])]):e._e(),e._v(" "),"paypal"===e.paymentMethod?n("div",{staticClass:"card-image"},[n("img",{attrs:{src:e.PayPalLogo}}),e._v(" "),n("span",[e._v("PayPal")])]):e._e(),e._v(" "),"credit"===e.paymentMethod?n("div",{staticClass:"card-image"},[n("img",{staticClass:"taco-fill",attrs:{src:e.TacoLogo}}),e._v(" "),n("span",[e._v("Credits")])]):e._e()])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{colspan:"2"}},[e._v("\n        Current Plan\n      ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{colspan:"2"}},[e._v("\n        New Selected Plan\n      ")])])}],!1,null,"3b5b7b92",null);t.default=component.exports},1854:function(e,t,n){"use strict";n.r(t);var r=n(1660).a,c=(n(1992),n(182)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{ref:"modal",staticClass:"license-modal-container"},["loaded"===e.state?n("ModalCloseButton",{attrs:{dark:""},on:{"click-close":e.handleClickClose},scopedSlots:e._u([{key:"default",fn:function(e){}}],null,!1,1975465144)}):e._e(),e._v(" "),"loading"===e.state?n("Loading",{attrs:{message:"Loading available plans..."}}):e._e(),e._v(" "),"submit"===e.state?n("Loading",{attrs:{message:"Updating your product..."}}):e._e(),e._v(" "),"success"===e.state?n("Success",{on:{close:e.onCancel}}):e._e(),e._v(" "),"error"===e.state?n("Error",{attrs:{message:"There's been an issue switching plans","error-message":e.errorMessage},on:{close:e.onCancel}}):e._e(),e._v(" "),"loaded"===e.state?n("div",{staticClass:"change-plan-modal-container"},[n("div",[n("h3",[e._v("Change plan")]),e._v(" "),n("hr")]),e._v(" "),n("div",{staticClass:"change-plan-modal-body"},[n("Steps",{attrs:{"current-step":e.currentStep,steps:e.stepTitles,"is-downgrade":e.isDowngrade},on:{change:e.onStepChange}}),e._v(" "),n("p",{staticClass:"mobile-title"},[e._v("\n        "+e._s(e.mobileTitle)+"\n      ")]),e._v(" "),n("keep-alive",[0===e.currentStep?n("SelectPlan",{attrs:{"current-plan":e.currentPlan,"selected-plan":e.newPlan,plans:e.dealPlans},on:{selectPlan:e.onSelectPlan}}):e._e(),e._v(" "),1===e.currentStep?n("SelectPaymentMethod",{attrs:{"payment-method":e.paymentMethod,"selected-card":e.selectedCard,"payment-total":e.paymentTotal},on:{selectMethod:e.onSelectMethod,selectCard:e.onSelectCard}}):e._e(),e._v(" "),2===e.currentStep?n("ReviewPlanChange",{attrs:{"selected-card":e.selectedCard,"payment-method":e.paymentMethod,"current-plan":e.currentPlan,"new-plan":e.newPlan,"is-downgrade":e.isDowngrade,"member-discount":e.memberDiscount,"discount-type":e.discountType}}):e._e()],1)],1),e._v(" "),n("div",{staticClass:"change-plan-modal-footer"},[n("Button",{staticClass:"cancel-button",attrs:{color:"primary",plain:""},on:{click:e.onCancel}},[e._v("\n        Cancel\n      ")]),e._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:2!==e.currentStep||2===e.currentStep&&"paypal"!==e.paymentMethod,expression:"currentStep !== 2 || currentStep === 2 && paymentMethod !== 'paypal'"}],staticClass:"continue-button",attrs:{disabled:!(e.currentStep<=e.dataForStep),color:2===e.currentStep?"warning":"primary"},on:{click:e.onContinue}},[e._v("\n        "+e._s(e.nextStep)+"\n      ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===e.currentStep&&"paypal"===e.paymentMethod,expression:"currentStep === 2 && paymentMethod === 'paypal'"}],ref:"paypalContainer",staticClass:"paypal-container"})],1)]):e._e()],1)}),[],!1,null,"b8150450",null);t.default=component.exports;installComponents(component,{Modal:n(808).default})},1992:function(e,t,n){"use strict";n(1767)},909:function(e,t,n){e.exports=n.p+"20aade1b6f5272f3ab13e58062beeb55.svg"}}]);
//# sourceMappingURL=2db04a5.js.map